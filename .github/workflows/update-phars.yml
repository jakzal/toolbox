name: Update PHARs

on:
    push:
        branches: [master]
    pull_request:
    release:
        types: [created]

jobs:
    update-phars:
        runs-on: ubuntu-latest
        name: Create a PR
        steps:
            -   uses: actions/checkout@v2
            -   uses: geertvdc/setup-hub@master
            -   run: git config user.email 'jakub@zalas.pl' && git config user.name 'Jakub Zalas'
            -   uses: docker://jakzal/phpqa:alpine
                with:
                    args: make package-devkit update-phars
            -   run: "hub pull-request -h tools-update -a jakzal -m 'Update tools' -m '' -m ':robot: This pull request was automagically sent from Github'"
                env:
                    GITHUB_TOKEN: ${{ secrets.ACCESS_TOKEN }}
